Nice. Thatâ€™s the moment where the whole thing stops feeling â€œprototypeyâ€ and starts feeling like a real product. ğŸ‘ŒğŸ»

Now that the bubble geometry is correct, the remaining job is to make sure the text always fits inside it, even for absolute monster sentences. Hereâ€™s what Iâ€™d do next (in order), so this never regresses.

1) Lock the contract in code (so nobody breaks it later)

Add a tiny helper so both the fit engine and renderer literally share the same numbers:
	â€¢	panelWidthPx
	â€¢	paddingPx
	â€¢	safetyMargin = 0.92
	â€¢	availableTextWidth = (panelWidthPx - 2*paddingPx) * safetyMargin

Then the renderer should always use:
	â€¢	bubble width = panelWidthPx (border-box)
	â€¢	bubble padding = paddingPx
	â€¢	text wrapper width = availableTextWidth (or 100% with an inner wrapper that applies the 0.92)

If you do it as one shared function, nobody can â€œhelpfullyâ€ tweak one side and not the other.

2) Add hard â€œnever clipâ€ CSS (cheap insurance)

Even with perfect widths, clipping can still happen from line-height, descenders, or a parent overflow.

Make sure the bubble never clips its child text:
	â€¢	bubble: overflow: visible
	â€¢	text: whiteSpace: normal
	â€¢	text: overflowWrap: anywhere
	â€¢	text: wordBreak: break-word

And give the text wrapper a touch of vertical breathing room:
	â€¢	lineHeight: 1.15 to 1.25 (pick one and keep it consistent)
	â€¢	paddingTop/paddingBottom if needed (a few px can stop the â€œg/j/y descenderâ€ crop)

3) Decide your â€œlong captionâ€ policy (so it looks intentional)

When captions get too long, you have 3 pro options. Pick one and enforce it:

A) Auto-shrink font (what youâ€™re doing now)
Best for â€œalways show everythingâ€, but can get small.

B) Max 2â€“3 lines, then split into two cards
This looks most premium for social. Itâ€™s what CapCut vibes like.

C) Max lines + ellipsis
Only if the content is optional (usually not ideal for insights).

For ICE cards, Iâ€™d go B: if it would need 4+ lines, split across cards automatically.

4) Add a debug toggle for future you

Add a dev flag like ?debugCaption=1 that draws:
	â€¢	bubble outline
	â€¢	available text area outline
	â€¢	shows the computed widths as text

This saves hours later.

5) Quick QA checklist (2 minutes, catches 90% of bugs)

Test these captions:
	â€¢	One very long word (no spaces)
	â€¢	Lots of punctuation and brackets
	â€¢	Numbers + % + currency
	â€¢	Mixed case and â€œg/j/yâ€ letters
	â€¢	1 line, 2 lines, 4+ lines

If those pass, youâ€™re basically done.

â¸»

If you want, paste the current ScaleToFitCaption styles (bubble + text wrapper) and Iâ€™ll tell you the exact â€œfinal polishâ€ settings (padding/line-height/safety margin) that will make it look consistently CapCut-level across all backgrounds.